require(["gitbook", "jQuery"], function(gitbook, $) {

    gitbook.events.bind("start", function(e, config) {
    });

    gitbook.events.bind("page.change", function(e) {
      function createHeader() {
        return '<div class="top-nav-header w-nav" data-animation="default" data-collapse="medium" data-doc-height="1" data-duration="200" data-no-scroll="1"> ' +
                    '<div class="w-container"> ' + 
                         '<div class="logodiv">'+
                              '<a class="brand w-nav-brand w--current" href="https://clife.cn/#/" target="_blank"> <img class="top-nav-logo" src="/images/logo54x54.png"> <span class="logo-title">C-Life 开放平台</span> '+
                              '</a> ' +
                         '</div>'+
                         '<div class="navDiv">'+
                              '<ul class="navbig-ul">'+
                                   '<li class="nvabig-li">'+
                                        '<a href="/source/zh-cn/overview/index.html">平台概述</a>'+
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                      '<a href="/source/zh-cn/product/index.html">快速接入</a>'+
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                      '<span class="nvabig-nav">APP开发</span>'+
                                         '<ul class="navtwo-ul App">'+
                                            '<li class="navtwo-li">'+
                                                  '<a href="/source/zh-cn/app/SDK/app_summary.html">APP 概述</a>'+
                                            '</li>'+
                                            '<li class="navtwo-li">'+
                                                  '<span>APP SDK</span>'+
                                                  '<ul class="navthree-ul threeAPP">'+
                                                       '<li class="navthree-li">'+
                                                            '<a href="/source/zh-cn/app/SDK/android_sdk.html">android SDK</a>'+
                                                       '</li>'+
                                                       '<li class="navthree-li">'+
															                              '<a href="/source/zh-cn/app/SDK/iOSSDK.html">iOS SDK</a>'+
                                                       '</li>'+
                                                       '<li class="navthree-li">'+
                                                            '<a href="/source/zh-cn/app/SDK/H5.html">H5 SDK</a>'+
                                                       '</li>'+
                                                  '</ul>'+
                                            '</li>'+    
                                        '</ul>'+
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                        '<span class="nvabig-nav">硬件开发</span>'+
                                        '<ul class="navtwo-ul twoYingjian">'+
                                             '<li class="navtwo-li">'+
                                               '<a href="/source/zh-cn/device/hardware_star.html">硬件接入准备工作</a>'+
                                             '</li>'+
                                             '<li class="navtwo-li">'+
                                                  '<a href="/source/zh-cn/device/mcu/mcu_framework.html">硬件MCU及源代码</a>'+
                                             '</li>'+
                                             '<li class="navtwo-li">'+
                                               '<a href="/source/zh-cn/device/ClifeAgent.html">硬件通讯模组</a>'+
                                             '</li>'+
                                        '</ul>'+     
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                        '<a href="/source/zh-cn/cloudAPI/cloudAPI.html">云API</a>'+
                                   '</li>'+
                              '</ul> '+
                         '</div>'+                    
                    '</div>'+                  
               '</div>';
    }
      // Get configuration.
      var headerTitle = 'NEW HEADER';
      $('.book-body').css({'top': '70px','left':'0px'});
       $('.book-summary').css({'top':'70px','display':'none'});//,'display':'none'
     
      //.book-body 的头部
      // $('.book-header').css({'top': '70px', 'border-top': '1px solid #ededed'});
      var $header = $('<div class="custom-header"></div>');
      var $headerWrapper = $('<div class="header-element-wrapper"></div>');
      var $link = $(createHeader());
      $headerWrapper.append($link);   
      $header.append($headerWrapper);
      $('.book-summary').before($header);
      $('.page-inner').css({'width': '100%','max-width':'none'});
      
      $('a.anchor-navigation-ex-anchor i').css({'display':'none'});
      // var navDiv = $('#anchor-navigation-ex-navbar').width();
      var divWidth = 975;
      var leftWidth = 22;
      // if(navDiv != undefined){
      //   divWidth +=navDiv;
      //   leftWidth +=navDiv;
      // }
      //'left':leftWidth
       $('.markdown-section').css({'width':'888px', 'margin-left':'475px', 'border':'1px solid #ccc', 'padding': '15px 15px'});
      // width :divWidth  'width':'1360px','min-width':'1360px',
      $('#book-search-results').css({'margin': '0 auto'});
      $(".custom-header").css({'position':'fiexd'});

      //console.log($('#anchor-navigation-ex-navbar'));
      //console.log(navDiv);

      //一级菜单 
      $(".nvabig-li").hover(
        function () {
           $(this).children(".navtwo-ul").addClass("hover");
        },
        function () {
          $(this).children(".navtwo-ul").removeClass("hover");
        }
      );
      //二级菜单
      $(".navtwo-li").hover(
        function () {
           $(this).children(".navthree-ul").addClass("hover");
        },
        function () {
          $(this).children(".navthree-ul").removeClass("hover");
        }
      );

      $(".navthree-li").hover(
          function () {
           $(this).children(".navfour-ul").addClass("hover");
          },
          function () {
           $(this).children(".navfour-ul").removeClass("hover");
          }
      );
      // console.log($("#anchor-navigation-ex-navbar").clone());
      $(".div-left").append($("#anchor-navigation-ex-navbar").clone());
      // $(window).resize(function () {
      //   var wid = $('#anchor-navigation-ex-navbar').getBoundingClientRect().left;
      //   console.log(wid);
      // div.getBoundingClientRect().left        
        // var wid = document.body.clientWidth; 
        // if(wid<=1366){
        //   $('.markdown-section').css({'width':'918px', 'margin-left':'444px', 'border':'1px solid #ccc', 'padding': '15px 15px'});
        // }
      // });
      
    });
});