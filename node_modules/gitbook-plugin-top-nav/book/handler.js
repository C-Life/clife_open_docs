require(["gitbook", "jQuery"], function(gitbook, $) {

    gitbook.events.bind("start", function(e, config) {
    });

    gitbook.events.bind("page.change", function(e) {
      function createHeader() {
        return '<div class="top-nav-header w-nav" data-animation="default" data-collapse="medium" data-doc-height="1" data-duration="200" data-no-scroll="1"> ' +
                    '<div class="w-container"> ' + 
                         '<div class="logodiv">'+
                              '<a class="brand w-nav-brand w--current" href="https://clife.cn/#/" target="_blank"> <img class="top-nav-logo" src="/images/logo54x54.png"> <span class="logo-title">C-Life 开放平台</span> '+
                              '</a> ' +
                         '</div>'+
                         '<div class="navDiv">'+
                              '<ul class="navbig-ul">'+

                                   '<li class="nvabig-li">'+
                                        '<span class="nvabig-nav">首页</span>'+           
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                        '<a href="/source/zh-cn/overview/index.html">平台概述</a>'+
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                      '<a href="/source/zh-cn/product/index.html">产品开发</a>'+
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                      '<span class="nvabig-nav">APP开发</span>'+
                                         '<ul class="navtwo-ul App">'+
                                            '<li class="navtwo-li">'+
                                                  '<span>应用管理</span>'+
                                                  '<ul class="navthree-ul threeYingYong">'+
                                                      '<li class="navthree-li">'+
                                                            '<span>新建应用</span>'+
                                                            '<ul class="navfour-ul forXingJian">'+
                                                                 '<li class="navfour-li">'+
                                                                       '<a href="">普通应用</a>'+
                                                                 '</li>'+
                                                                 '<li class="navfour-li">'+
                                                                       '<a href="">云对接服务</a>'+
                                                                 '</li>'+
                                                            '</ul>'+
                                                      '</li>'+
                                                       '<li class="navthree-li">'+
                                                            '<span>应用模式</span>'+
                                                            '<ul class="navfour-ul fourYingMo">'+
                                                                 '<li class="navfour-li">'+
                                                                      '<a href="">开发模式</a>'+
                                                                 '</li>'+
                                                                 '<li class="navfour-li">'+
                                                                     '<a href="">配置模式</a>'+
                                                                 '</li>'+
                                                            '</ul>'+
                                                       '</li>'+
                                                       '<li class="navthree-li">'+
                                                            '<span>关联产品</span>'+
                                                       '</li>'+
                                                  '</ul>'+
                                            '</li>'+
                                            '<li class="navtwo-li">'+
                                                  '<span>APP SDK</span>'+
                                                  '<ul class="navthree-ul threeAPP">'+
                                                       '<li class="navthree-li">'+
                                                            '<a href="/source/zh-cn/app/SDK/android_sdk.html">android SDK</a>'+
                                                       '</li>'+
                                                       '<li class="navthree-li">'+
															                              '<a href="/source/zh-cn/app/SDK/iOSSDK.html">iOS SDK</a>'+
                                                       '</li>'+
                                                       '<li class="navthree-li">'+
                                                            '<a href="/source/zh-cn/app/SDK/H5.html">H5 SDK</a>'+
                                                       '</li>'+
                                                  '</ul>'+
                                            '</li>'+                                
                                            '<li class="navtwo-li">'+
                                                  '<span>开源框架</span>'+
                                                  '<ul class="navthree-ul threeAPP">'+
                                                       '<li class="navthree-li">'+
                                                            '<a href="/source/zh-cn/app/SDK/android_demo.html">android APP 开源框架</a>'+
                                                       '</li>'+
                                                       '<li class="navthree-li">'+
															                              '<a href="/source/zh-cn/app/SDK/iOS_demo.html">iOS APP 开源框架</a>'+
                                                       '</li>'+
                                                  '</ul>'+
                                            '</li>'+
                                        '</ul>'+
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                        '<span class="nvabig-nav">硬件开发</span>'+
                                        '<ul class="navtwo-ul twoYingjian">'+
                                             '<li class="navtwo-li">'+
                                               '<a href="/source/zh-cn/device/hardware_star.html">硬件接入准备工作</a>'+
                                             '</li>'+
                                             '<li class="navtwo-li">'+
                                                  '<a href="/source/zh-cn/device/mcu_source.html">硬件MCU及源代码</a>'+
                                                  '<ul class="navthree-ul threeYingjian">'+
                                                      '<li class="navthree-li">'+
                                                            '<a href="">开发板原理图</a>'+
                                                      '</li>'+
                                                      '<li class="navthree-li">'+
                                                            '<a href="/source/zh-cn/device/mcu_framework.html">mcu源码框架</a>'+
                                                      '</li>'+
                                                  '</ul>'+
                                             '</li>'+
                                             '<li class="navtwo-li">'+
                                               '<a href="/source/zh-cn/device/ClifeAgent.html">硬件通讯模组</a>'+
                                             '</li>'+
                                        '</ul>'+     
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                        '<a href="/source/zh-cn/cloudAPI/cloudAPI.html">云API</a>'+
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                        '<span class="nvabig-nav">数据服务</span>'+
                                        '<ul class="navtwo-ul twoShuJu">'+
                                             '<li class="navtwo-li">'+
                                                '<a href="/source/zh-cn/dataservice/index/61-gai-kuang.html">概况</a>'+
                                             '</li>'+
                                             '<li class="navtwo-li">'+
                                                '<a href="">数据统计</a>'+
                                             '</li>'+
                                             '<li class="navtwo-li"><a href="">数据分析</a></li>'+
                                             '<li class="navtwo-li"><a href="/source/zh-cn/dataservice/index/64-shi-shi-jian-kong.html">实时监控</a></li>'+
                                             '<li class="navtwo-li"><a href="">设备预警</a></li>'+
                                             '<li class="navtwo-li"><a href="">书签管理</a></li>'+
                                             '<li class="navtwo-li"><a href="">运营管理</a></li>'+
                                        '</ul>'+
                                   '</li>'+

                                   '<li class="nvabig-li">'+
                                    '<span class="nvabig-nav">推送服务</span>'+
                                        '<ul class="navtwo-ul twoShuJu">'+
                                            '<li class="navtwo-li">'+
                                              '<a href="/source/zh-cn/app/SDK/android_push.html">Android推送服务</a>'+
                                            '</li>'+ 
                                      '</ul>'+
                                   '</li>'+
                              '</ul> '+
                         '</div>'+                    
                    '</div>'+                  
               '</div>';
    }
      // Get configuration.
      var headerTitle = 'NEW HEADER';
      $('.book-body').css({'top': '70px','left':'0px'});
       $('.book-summary').css({'top':'70px','display':'none'});//,'display':'none'
     
      //.book-body 的头部
      // $('.book-header').css({'top': '70px', 'border-top': '1px solid #ededed'});
      var $header = $('<div class="custom-header"></div>');
      var $headerWrapper = $('<div class="header-element-wrapper"></div>');
      var $link = $(createHeader());
      $headerWrapper.append($link);   
      $header.append($headerWrapper);
      $('.book-summary').before($header);
      $('.page-inner').css({'width': '100%','max-width':'none'});
      
      $('a.anchor-navigation-ex-anchor i').css({'display':'none'});
      var navDiv = $('#anchor-navigation-ex-navbar').width();
      var divWidth = 975;
      var leftWidth = 22;
      if(navDiv != undefined){
        divWidth +=navDiv;
        leftWidth +=navDiv;
      }
       $('.markdown-section').css({'position': 'relative','width':'938px', 'left':leftWidth, 'box-shadow':'5px 5px 2px #ccc','border':'1px solid #ccc', 'padding': '0 15px'});
      $('#book-search-results').css({'width':divWidth,'margin': '0 auto', 'padding':'5px 10px'});

      //console.log($('#anchor-navigation-ex-navbar'));
      //console.log(navDiv);

      //一级菜单 
      $(".nvabig-li").hover(
        function () {
           $(this).children(".navtwo-ul").addClass("hover");
        },
        function () {
          $(this).children(".navtwo-ul").removeClass("hover");
        }
      );
      //二级菜单
      $(".navtwo-li").hover(
        function () {
           $(this).children(".navthree-ul").addClass("hover");
        },
        function () {
          $(this).children(".navthree-ul").removeClass("hover");
        }
      );

      $(".navthree-li").hover(
          function () {
           $(this).children(".navfour-ul").addClass("hover");
          },
          function () {
           $(this).children(".navfour-ul").removeClass("hover");
          }
     );
      // $("#jMenu").jMenu();
    });
});